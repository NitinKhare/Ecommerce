<% include ../adminheader.ejs %>
 
<h2>Edit Product</h2>
<br>

<form action="/admin-products/edit/<%= id %>" method="POST" enctype="multipart/form-data">
    <div class="form-group">
        <label for="">Title</label>
        <input type="text" class="form-control" name="title" value=<%= title %> placeholder="Enter the title" ">
    </div>

    <div class="form-group">
            <label for="">Category</label>
        <select class="form-control" name ="category">
            <% category.forEach(function(category){ %>
            <option value="<%= category.title %>"><%= category.title %></option> 
            <% }); %>
    </select>
    </div>

    <div class="form-group">
            <label for="">Price</label>
            <input type="number" class="form-control" value=<%= price %> name="price" placeholder="Enter the Price" ">
        </div>

        
        <div class="form-group">
            <label for="">Current Image</label>
            <% if(image == "") {%>
            <p>Add an Image</p>
            <%} else {%>
            <img src="public/product_image/<%= id %>/<%= image %>" id="imgPreview" alt="">
            <% } %>
    </div>


        <div class="form-group">
                <label for="">Image</label>
                <input type="file" class="form-control" name="image" id="img" required>
                <img src="#" id="imgPreview" alt="">
        </div>
    

    <div class="form-group">
            <label for="">Description</label>
            <textarea type="text"  class="form-control" name="description" cols="40" rows="10" placeholder="Enter the Description of the product"></textarea>
    </div>

            <div class="form-group">
            <a class="btn btn-link float-right" href="/admin-products/">All Products</a><br>
        </div>
        
        <div class="form-group">
            <button type="submit" class="btn btn-lg btn-success float-right">Create</button>
        </div>
</form>


<script>
function imgPreview(input){
    if(input.files && input.files[0]){
        var read = new FileReader();

        read.onload = function(e){
            $('#imgPreview').attr('src', e.target.result).width(100).height(100);
        }

        read.readAsDataURL(input.files[0]);
    }
}

$("#img").change(function(){
    imgPreview(this);
});

</script>
    

<% include ../adminfooter.ejs %>